<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Stopwatch â€” Multiple Parallel Timers, Laps & CSV Export | GoToolOnline</title>
<meta name="description" content="Free online stopwatch with up to 5 parallel timers. Start/Pause, Lap tracking, Reset and CSV export. Big digits, keyboard shortcuts, and shareable URL (?n=5)."/>
<meta content="width=device-width, initial-scale=1" name="viewport">
<link href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'><text x='2' y='14' font-size='14'>â±ï¸</text></svg>" rel="icon"/>
<!-- Canonical & Social -->

<meta content="website" property="og:type"/>
<meta content="Stopwatch â€” Up to 5 Parallel Timers | GoToolOnline" property="og:title"/>
<meta content="Run multiple stopwatches at once. Lap, Reset, Export CSV. Big digits and keyboard shortcuts." property="og:description"/>
<meta content="https://gotoolonline.com/time/stopwatch/" property="og:url"/>
<meta content="summary" name="twitter:card"/>
<meta content="index, follow, max-image-preview:large" name="robots"/>
<!-- Structured data -->
<script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"Stopwatch",
    "url":"https://gotoolonline.com/time/stopwatch/",
    "applicationCategory":"Timer",
    "operatingSystem":"Web",
    "offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
    "publisher":{"@type":"Organization","name":"GoToolOnline","url":"https://gotoolonline.com"}
  }
</script>
<script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Home","item":"https://gotoolonline.com/"},
      {"@type":"ListItem","position":2,"name":"Time Tools","item":"https://gotoolonline.com/time/"},
      {"@type":"ListItem","position":3,"name":"Stopwatch","item":"https://gotoolonline.com/time/stopwatch/"}
    ]
  }
</script>
<script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {"@type":"Question","name":"How many stopwatches can I run?","acceptedAnswer":{"@type":"Answer","text":"You can run up to five independent stopwatches in parallel."}},
      {"@type":"Question","name":"Can I export lap times?","acceptedAnswer":{"@type":"Answer","text":"Yes. Each stopwatch can export its laps as a CSV file (Lap, Split, Total)."}},
      {"@type":"Question","name":"How do I share a setup with multiple timers?","acceptedAnswer":{"@type":"Answer","text":"Append a query like ?n=5 to the URL to open the page with five stopwatches."}}
    ]
  }
</script>
<style>
  :root { --bg:#0a0f1e; --card:#0f1830; --muted:#9fb0c3; --fg:#eaf3ff; --acc:#4fb3ff; }
  *{box-sizing:border-box}
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:var(--bg);color:var(--fg)}
  header{max-width:1200px;margin:24px auto 8px;display:flex;gap:14px;align-items:center;padding:0 18px}
  header a.logo{display:flex;gap:10px;align-items:center;text-decoration:none;color:var(--fg);font-weight:800;font-size:24px;white-space:nowrap}
  header a.navbtn{padding:10px 14px;background:#0f1a2f;border:1px solid #24365b;border-radius:12px;color:#eaf3ff;text-decoration:none;font-size:16px;white-space:nowrap}
  header a.navbtn:hover{border-color:#4fb3ff;box-shadow:0 0 0 3px rgba(79,179,255,.18)}
  .langWrap{margin-left:auto;display:flex;align-items:center;gap:8px}
  .lang{padding:8px 10px;border-radius:10px;border:1px solid #24365b;background:#0f1a2f;color:#eaf3ff;font-size:14px}
  main{max-width:1200px;margin:10px auto 72px;padding:0 18px}
  h1{font-size:34px;margin:10px 0 12px}
  p,label{font-size:18px;line-height:1.6}
  .muted{color:var(--muted)}
  .card{background:#0f1830;border:1px solid #1a2843;border-radius:20px;padding:20px;margin:16px 0}
  input,button{padding:12px 14px;border-radius:12px;border:1px solid #24365b;background:#0f1a2f;color:#eaf3ff;font-size:16px}
  button{cursor:pointer;background:linear-gradient(180deg,#2a78ff,#0050d4);border:none;font-weight:700;letter-spacing:.2px}
  button:hover{filter:brightness(1.06)}
  .toolbar{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .small{font-size:14px;color:#9fb0c3}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(320px,1fr));gap:16px;margin-top:16px}
  .sw{background:#0f1830;border:1px solid #1a2843;border-radius:16px;padding:16px;display:flex;flex-direction:column;gap:10px}
  .sw .title{display:flex;justify-content:space-between;align-items:center}
  .sw .title strong{font-size:18px}
  .time{font-size:48px;font-weight:900;letter-spacing:1px;text-align:center}
  .controls{display:flex;gap:10px;flex-wrap:wrap;justify-content:center}
  .laplist{border-top:1px dashed #2a3c64;margin-top:8px;padding-top:8px;max-height:220px;overflow:auto}
  table{width:100%;border-collapse:collapse;font-size:14px}
  th,td{padding:6px 8px;text-align:left;border-bottom:1px solid #1a2843;white-space:nowrap}
  kbd{background:#0f1a2f;border:1px solid #24365b;border-radius:6px;padding:2px 6px;font-size:12px}
  .chip{padding:8px 12px;border:1px solid #24365b;background:#0f1a2f;border-radius:999px;cursor:pointer;font-size:16px}
  .chip:hover{border-color:#4fb3ff;box-shadow:0 0 0 3px rgba(79,179,255,.18)}
  footer{max-width:1200px;margin:40px auto;padding:0 18px;color:#9fb0c3;font-size:14px}
  .footer-links a{color:#8cd1ff;text-decoration:none;margin-right:10px}
  .footer-links a:hover{text-decoration:underline}
  @media (max-width:480px){ .time{font-size:38px} }
  @media print{ header,footer,.toolbar,.langWrap{display:none!important} body{background:#fff;color:#000} .card,.sw{border:none} }
</style>

  
  <link rel="alternate" hreflang="en" href="https://gotoolonline.com/time/stopwatch/"/>
  <link rel="alternate" hreflang="x-default" href="https://gotoolonline.com/time/stopwatch/"/>

<link rel="canonical" href="https://gotoolonline.com/time/stopwatch/">
</head>
<body>
<header>
  <a class="logo" data-home href="#"><span>ğŸ› ï¸</span><strong>GoToolOnline</strong></a>
  <a id="backLink" class="navbtn" data-home href="#">â† Back to Home</a>
  <div class="langWrap">
    <span class="muted">ğŸŒ</span>
    <select id="lang" class="lang" aria-label="Language">
      <option value="en">English</option>
      <option value="zh">ç®€ä½“ä¸­æ–‡</option>
      <option value="ph">Tagalog</option>
      <option value="id">Bahasa Indonesia</option>
      <option value="vi">Tiáº¿ng Viá»‡t</option>
      <option value="bn">à¦¬à¦¾à¦‚à¦²à¦¾</option>
      <option value="ng">English (NG)</option>
      <option value="sw">Kiswahili</option>
      <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
    </select>
  </div>
</header>

<main>
  <nav aria-label="Breadcrumb" class="small" style="margin-bottom:6px">
    <a id="bcHome" data-home href="#">Home</a> â€º <a id="bcTime" href="/time/">Time Tools</a> â€º <strong id="bcCurrent">Stopwatch</strong>
  </nav>

  <section class="card">
    <h1 id="pageTitle">Stopwatch (Up to 5)</h1>
    <p id="hero" class="muted">Run multiple independent stopwatches with lap timing and CSV export. Share a multi-stopwatch layout via <code>?n=5</code>.</p>
    <div class="toolbar">
      <button id="addOne">Add Stopwatch</button>
      <button id="addToFive" title="Create up to five stopwatches">Add 4 More</button>
      <span id="kbHint" class="small">Keyboard (focused card): <kbd>Space</kbd> Start/Pause Â· <kbd>L</kbd> Lap Â· <kbd>R</kbd> Reset</span>
    </div>
  </section>

  <section class="grid" id="wrap"></section>

  <section aria-labelledby="faq-h2" class="card">
    <h2 id="faq-h2" style="margin:0 0 8px 0;font-size:22px">FAQ</h2>
    <details><summary id="q1">How do I open with 5 stopwatches?</summary><div id="a1" class="small">Visit <code>/time/stopwatch/?n=5</code> and share that link.</div></details>
    <details><summary id="q2">Can I export lap times?</summary><div id="a2" class="small">Yes â€” click <b>Export</b> to download a CSV (Lap, Split, Total).</div></details>
    <details><summary id="q3">Does it work offline?</summary><div id="a3" class="small">The timer logic runs in your browser. No sign-in required.</div></details>
  </section>

  <section class="card">
    <h2 id="relTitle" style="margin:0 0 6px 0;font-size:22px">Related tools</h2>
    <p id="relText" class="small" style="margin:0">
      Need alarms instead? Try the <a href="/time/countdown-timer/">Countdown Timer</a>.
      For dates math, see <a href="/calculators/date-difference/">Date Difference</a>.
    </p>
  </section>
</main>

<footer>
  <div class="footer-links">
    <a href="/about/">About</a> Â·
    <a href="/privacy/">Privacy</a> Â·
    <a href="/terms/">Terms</a> Â·
    <a href="/contact/">Contact</a>
  </div>
  <div style="margin-top:8px">Â© <span id="y"></span> GoToolOnline.com Â· Free online tools for everyone.</div>
</footer>

<script>
  document.getElementById('y').textContent = new Date().getFullYear();

  // ---------- i18n ----------
  const HTML_LANG = { en:'en', zh:'zh-CN', ph:'tl-PH', id:'id-ID', vi:'vi-VN', bn:'bn', ng:'en-NG', sw:'sw', ar:'ar' };

  const I18N = {
    en: {
      metaTitle:"Stopwatch â€” Multiple Parallel Timers, Laps & CSV Export | GoToolOnline",
      metaDesc:"Free online stopwatch with up to 5 parallel timers. Start/Pause, Lap tracking, Reset and CSV export. Big digits, keyboard shortcuts, and shareable URL (?n=5).",
      back:"â† Back to Home",
      crumbHome:"Home", crumbTime:"Time Tools", crumbCur:"Stopwatch",
      h1:"Stopwatch (Up to 5)",
      hero:'Run multiple independent stopwatches with lap timing and CSV export. Share a multi-stopwatch layout via <code>?n=5</code>.',
      addOne:"Add Stopwatch", addToFive:"Add 4 More",
      kbdHint:'Keyboard (focused card): <kbd>Space</kbd> Start/Pause Â· <kbd>L</kbd> Lap Â· <kbd>R</kbd> Reset',
      // card
      cardTitle:"Stopwatch", remove:"Remove", removeTitle:"Remove this stopwatch",
      start:"Start", pause:"Pause", lap:"Lap", reset:"Reset", export:"Export",
      lapsLabel:"Laps", thN:"#", thSplit:"Split", thTotal:"Total",
      alertMax:"Up to 5 stopwatches only.", alertNoLaps:"No laps to export.",
      csvHeader:["Lap","Split","Total"],
      // FAQ & related
      faq:"FAQ",
      q1:"How do I open with 5 stopwatches?", a1:'Visit <code>/time/stopwatch/?n=5</code> and share that link.',
      q2:"Can I export lap times?", a2:'Yes â€” click <b>Export</b> to download a CSV (Lap, Split, Total).',
      q3:"Does it work offline?", a3:"The timer logic runs in your browser. No sign-in required.",
      relTitle:"Related tools",
      relText:'Need alarms instead? Try the <a href="/time/countdown-timer/">Countdown Timer</a>. For dates math, see <a href="/calculators/date-difference/">Date Difference</a>.'
    },
    zh: {
      metaTitle:"ç§’è¡¨ â€” å¤šè·¯å¹¶è¡Œã€åœˆé€Ÿä¸ CSV å¯¼å‡º | GoToolOnline",
      metaDesc:"å…è´¹åœ¨çº¿ç§’è¡¨ï¼Œæœ€å¤šå¹¶è¡Œ 5 ç»„ã€‚å¼€å§‹/æš‚åœã€åœˆé€Ÿã€é‡ç½®ä¸ CSV å¯¼å‡ºã€‚å¤§å·æ•°å­—ã€é”®ç›˜å¿«æ·é”®ã€å¯åˆ†äº«é“¾æ¥ï¼ˆ?n=5ï¼‰ã€‚",
      back:"â† è¿”å›é¦–é¡µ",
      crumbHome:"é¦–é¡µ", crumbTime:"æ—¶é—´å·¥å…·", crumbCur:"ç§’è¡¨",
      h1:"ç§’è¡¨ï¼ˆæœ€å¤š 5 ä¸ªï¼‰",
      hero:'æ”¯æŒå¤šç»„ç‹¬ç«‹ç§’è¡¨ï¼Œåœˆé€Ÿä¸ CSV å¯¼å‡ºã€‚å¯ç”¨ <code>?n=5</code> æ‰“å¼€ 5 ç»„å¸ƒå±€å¹¶åˆ†äº«ã€‚',
      addOne:"æ–°å¢ç§’è¡¨", addToFive:"ä¸€é”®åˆ° 5 ä¸ª",
      kbdHint:'é”®ç›˜ï¼ˆå¡ç‰‡èšç„¦ï¼‰ï¼š<kbd>Space</kbd> å¼€å§‹/æš‚åœ Â· <kbd>L</kbd> è®°åœˆ Â· <kbd>R</kbd> é‡ç½®',
      cardTitle:"ç§’è¡¨", remove:"åˆ é™¤", removeTitle:"åˆ é™¤è¯¥ç§’è¡¨",
      start:"å¼€å§‹", pause:"æš‚åœ", lap:"åœˆé€Ÿ", reset:"é‡ç½®", export:"å¯¼å‡º",
      lapsLabel:"åœˆé€Ÿ", thN:"#", thSplit:"åˆ†æ®µ", thTotal:"ç´¯è®¡",
      alertMax:"æœ€å¤š 5 ä¸ªç§’è¡¨ã€‚", alertNoLaps:"æ²¡æœ‰å¯å¯¼å‡ºçš„åœˆé€Ÿã€‚",
      csvHeader:["Lap","Split","Total"],
      faq:"å¸¸è§é—®é¢˜",
      q1:"å¦‚ä½•ç›´æ¥æ‰“å¼€ 5 ä¸ªç§’è¡¨ï¼Ÿ", a1:'è®¿é—® <code>/time/stopwatch/?n=5</code> å¹¶åˆ†äº«è¯¥é“¾æ¥ã€‚',
      q2:"èƒ½å¯¼å‡ºåœˆé€Ÿå—ï¼Ÿ", a2:'å¯ä»¥ï¼Œç‚¹å‡» <b>å¯¼å‡º</b> ä¸‹è½½ CSVï¼ˆLap/Single Split/Totalï¼‰ã€‚',
      q3:"ç¦»çº¿å¯ç”¨å—ï¼Ÿ", a3:"é€»è¾‘åœ¨æµè§ˆå™¨å†…æ‰§è¡Œï¼Œæ— éœ€ç™»å½•ã€‚",
      relTitle:"ç›¸å…³å·¥å…·",
      relText:'éœ€è¦é—¹é’Ÿï¼Ÿè¯•è¯• <a href="/time/countdown-timer/">å€’è®¡æ—¶è®¡æ—¶å™¨</a>ã€‚æ—¥æœŸè®¡ç®—å‚è§ <a href="/calculators/date-difference/">æ—¥æœŸå·®è®¡ç®—</a>ã€‚'
    },
    ph: {
      metaTitle:"Stopwatch â€” Maramihang Timer, Lap at CSV Export | GoToolOnline",
      metaDesc:"Libreng stopwatch na may hanggang 5 sabayang timer. Start/Pause, Lap, Reset at CSV export. Malalaking digit at keyboard shortcuts.",
      back:"â† Balik sa Home",
      crumbHome:"Home", crumbTime:"Mga Tool sa Oras", crumbCur:"Stopwatch",
      h1:"Stopwatch (Hanggang 5)",
      hero:'Magpatakbo ng maraming independent stopwatch na may lap at CSV export. Ibahagi ang layout gamit ang <code>?n=5</code>.',
      addOne:"Magdagdag ng Stopwatch", addToFive:"Dagdag pa ng 4",
      kbdHint:'Keyboard (nakatuon ang card): <kbd>Space</kbd> Start/Pause Â· <kbd>L</kbd> Lap Â· <kbd>R</kbd> Reset',
      cardTitle:"Stopwatch", remove:"Alisin", removeTitle:"Alisin ang stopwatch na ito",
      start:"Start", pause:"Pause", lap:"Lap", reset:"Reset", export:"Export",
      lapsLabel:"Laps", thN:"#", thSplit:"Split", thTotal:"Total",
      alertMax:"Hanggang 5 stopwatch lamang.", alertNoLaps:"Walang laps para i-export.",
      csvHeader:["Lap","Split","Total"],
      faq:"FAQ",
      q1:"Paano bubuksan na may 5 stopwatch?", a1:'Bisitahin ang <code>/time/stopwatch/?n=5</code> at ibahagi ang link.',
      q2:"Maaari bang i-export ang lap times?", a2:'Oo â€” i-click ang <b>Export</b> para i-download ang CSV (Lap, Split, Total).',
      q3:"Gagana ba offline?", a3:"Tumatakbo ang lohika sa iyong browser. Walang sign-in.",
      relTitle:"Kaugnay na tool",
      relText:'Kailangan mo ng alarma? Subukan ang <a href="/time/countdown-timer/">Countdown Timer</a>. Para sa petsa, tingnan ang <a href="/calculators/date-difference/">Date Difference</a>.'
    },
    id: {
      metaTitle:"Stopwatch â€” Banyak Timer Paralel, Lap & Ekspor CSV | GoToolOnline",
      metaDesc:"Stopwatch online gratis hingga 5 timer paralel. Mulai/Jeda, Lap, Reset, dan ekspor CSV. Digit besar & pintasan keyboard.",
      back:"â† Kembali ke Beranda",
      crumbHome:"Beranda", crumbTime:"Alat Waktu", crumbCur:"Stopwatch",
      h1:"Stopwatch (Hingga 5)",
      hero:'Jalankan beberapa stopwatch independen dengan lap & ekspor CSV. Bagikan tata letak dengan <code>?n=5</code>.',
      addOne:"Tambah Stopwatch", addToFive:"Tambah 4 Lagi",
      kbdHint:'Keyboard (kartu fokus): <kbd>Space</kbd> Mulai/Jeda Â· <kbd>L</kbd> Lap Â· <kbd>R</kbd> Atur Ulang',
      cardTitle:"Stopwatch", remove:"Hapus", removeTitle:"Hapus stopwatch ini",
      start:"Mulai", pause:"Jeda", lap:"Lap", reset:"Atur Ulang", export:"Ekspor",
      lapsLabel:"Lap", thN:"#", thSplit:"Split", thTotal:"Total",
      alertMax:"Maksimal 5 stopwatch saja.", alertNoLaps:"Tidak ada lap untuk diekspor.",
      csvHeader:["Lap","Split","Total"],
      faq:"FAQ",
      q1:"Bagaimana membuka 5 stopwatch?", a1:'Kunjungi <code>/time/stopwatch/?n=5</code> dan bagikan tautannya.',
      q2:"Bisakah mengekspor lap?", a2:'Bisa â€” klik <b>Ekspor</b> untuk mengunduh CSV (Lap, Split, Total).',
      q3:"Bisa offline?", a3:"Logika berjalan di browser Anda. Tanpa masuk.",
      relTitle:"Alat terkait",
      relText:'Butuh alarm? Coba <a href="/time/countdown-timer/">Countdown Timer</a>. Untuk tanggal, lihat <a href="/calculators/date-difference/">Date Difference</a>.'
    },
    vi: {
      metaTitle:"Äá»“ng há»“ báº¥m giá» â€” Nhiá»u bá»™ song song, vÃ²ng & xuáº¥t CSV | GoToolOnline",
      metaDesc:"Äá»“ng há»“ báº¥m giá» trá»±c tuyáº¿n miá»…n phÃ­, tá»‘i Ä‘a 5 bá»™ song song. Báº¯t Ä‘áº§u/Táº¡m dá»«ng, VÃ²ng (Lap), Äáº·t láº¡i vÃ  xuáº¥t CSV. Sá»‘ lá»›n & phÃ­m táº¯t.",
      back:"â† Vá» Trang chá»§",
      crumbHome:"Trang chá»§", crumbTime:"CÃ´ng cá»¥ Thá»i gian", crumbCur:"Äá»“ng há»“ báº¥m giá»",
      h1:"Äá»“ng há»“ báº¥m giá» (tá»‘i Ä‘a 5)",
      hero:'Cháº¡y nhiá»u Ä‘á»“ng há»“ Ä‘á»™c láº­p, cÃ³ vÃ²ng vÃ  xuáº¥t CSV. Chia sáº» bá»‘ cá»¥c báº±ng <code>?n=5</code>.',
      addOne:"ThÃªm Ä‘á»“ng há»“", addToFive:"ThÃªm 4 cÃ¡i ná»¯a",
      kbdHint:'BÃ n phÃ­m (khi tháº» Ä‘Æ°á»£c chá»n): <kbd>Space</kbd> Báº¯t Ä‘áº§u/Táº¡m dá»«ng Â· <kbd>L</kbd> VÃ²ng Â· <kbd>R</kbd> Äáº·t láº¡i',
      cardTitle:"Äá»“ng há»“", remove:"XoÃ¡", removeTitle:"XoÃ¡ Ä‘á»“ng há»“ nÃ y",
      start:"Báº¯t Ä‘áº§u", pause:"Táº¡m dá»«ng", lap:"VÃ²ng", reset:"Äáº·t láº¡i", export:"Xuáº¥t",
      lapsLabel:"VÃ²ng", thN:"#", thSplit:"Split", thTotal:"Tá»•ng",
      alertMax:"Tá»‘i Ä‘a 5 Ä‘á»“ng há»“ báº¥m giá».", alertNoLaps:"KhÃ´ng cÃ³ vÃ²ng Ä‘á»ƒ xuáº¥t.",
      csvHeader:["Lap","Split","Total"],
      faq:"FAQ",
      q1:"Má»Ÿ sáºµn 5 Ä‘á»“ng há»“ tháº¿ nÃ o?", a1:'Truy cáº­p <code>/time/stopwatch/?n=5</code> vÃ  chia sáº» liÃªn káº¿t.',
      q2:"Xuáº¥t thá»i gian vÃ²ng Ä‘Æ°á»£c khÃ´ng?", a2:'ÄÆ°á»£c â€” báº¥m <b>Xuáº¥t</b> Ä‘á»ƒ táº£i CSV (Lap, Split, Total).',
      q3:"DÃ¹ng offline chá»©?", a3:"Cháº¡y hoÃ n toÃ n trong trÃ¬nh duyá»‡t, khÃ´ng cáº§n Ä‘Äƒng nháº­p.",
      relTitle:"CÃ´ng cá»¥ liÃªn quan",
      relText:'Cáº§n bÃ¡o thá»©c? Thá»­ <a href="/time/countdown-timer/">Äá»“ng há»“ Ä‘áº¿m ngÆ°á»£c</a>. TÃ­nh ngÃ y xem <a href="/calculators/date-difference/">ChÃªnh lá»‡ch ngÃ y</a>.'
    },
    bn: {
      metaTitle:"à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š â€” à¦à¦•à¦¾à¦§à¦¿à¦• à¦Ÿà¦¾à¦‡à¦®à¦¾à¦°, à¦²à§à¦¯à¦¾à¦ª à¦“ CSV à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿ | GoToolOnline",
      metaDesc:"à¦¬à¦¿à¦¨à¦¾à¦®à§‚à¦²à§à¦¯à§‡à¦° à¦…à¦¨à¦²à¦¾à¦‡à¦¨ à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š (à¦¸à¦°à§à¦¬à§‹à¦šà§à¦š à§«à¦Ÿà¦¿ à¦¸à¦®à¦¾à¦¨à§à¦¤à¦°à¦¾à¦²)à¥¤ à¦¶à§à¦°à§/à¦¬à¦¿à¦°à¦¤à¦¿, à¦²à§à¦¯à¦¾à¦ª, à¦°à¦¿à¦¸à§‡à¦Ÿ à¦“ CSV à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿà¥¤ à¦¬à¦¡à¦¼ à¦¡à¦¿à¦œà¦¿à¦Ÿ à¦“ à¦•à¦¿à¦¬à§‹à¦°à§à¦¡ à¦¶à¦°à§à¦Ÿà¦•à¦¾à¦Ÿà¥¤",
      back:"â† à¦¹à§‹à¦®à§‡ à¦«à¦¿à¦°à§‡ à¦¯à¦¾à¦¨",
      crumbHome:"à¦¹à§‹à¦®", crumbTime:"à¦¸à¦®à¦¯à¦¼à§‡à¦° à¦Ÿà§à¦²à¦¸", crumbCur:"à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š",
      h1:"à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š (à¦¸à¦°à§à¦¬à§‹à¦šà§à¦š à§«à¦Ÿà¦¿)",
      hero:'à¦à¦•à¦¾à¦§à¦¿à¦• à¦¸à§à¦¬à¦¾à¦§à§€à¦¨ à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š à¦šà¦¾à¦²à¦¾à¦¨, à¦²à§à¦¯à¦¾à¦ªà¦¸à¦¹ CSV à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿà¥¤ <code>?n=5</code> à¦¦à¦¿à¦¯à¦¼à§‡ à§«à¦Ÿà¦¿à¦° à¦²à§‡à¦†à¦‰à¦Ÿ à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§à¦¨à¥¤',
      addOne:"à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š à¦¯à§‹à¦— à¦•à¦°à§à¦¨", addToFive:"à¦†à¦° à§ªà¦Ÿà¦¿ à¦¯à§‹à¦— à¦•à¦°à§à¦¨",
      kbdHint:'à¦•à¦¿à¦¬à§‹à¦°à§à¦¡ (à¦•à¦¾à¦°à§à¦¡ à¦«à§‹à¦•à¦¾à¦¸): <kbd>Space</kbd> à¦¶à§à¦°à§/à¦¬à¦¿à¦°à¦¤à¦¿ Â· <kbd>L</kbd> à¦²à§à¦¯à¦¾à¦ª Â· <kbd>R</kbd> à¦°à¦¿à¦¸à§‡à¦Ÿ',
      cardTitle:"à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š", remove:"à¦®à§à¦›à§à¦¨", removeTitle:"à¦à¦‡ à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š à¦®à§à¦›à§à¦¨",
      start:"à¦¶à§à¦°à§", pause:"à¦¬à¦¿à¦°à¦¤à¦¿", lap:"à¦²à§à¦¯à¦¾à¦ª", reset:"à¦°à¦¿à¦¸à§‡à¦Ÿ", export:"à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿ",
      lapsLabel:"à¦²à§à¦¯à¦¾à¦ª", thN:"#", thSplit:"à¦¸à§à¦ªà§à¦²à¦¿à¦Ÿ", thTotal:"à¦®à§‹à¦Ÿ",
      alertMax:"à¦¸à¦°à§à¦¬à§‹à¦šà§à¦š à§«à¦Ÿà¦¿ à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦šà¥¤", alertNoLaps:"à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿ à¦•à¦°à¦¾à¦° à¦®à¦¤à§‹ à¦²à§à¦¯à¦¾à¦ª à¦¨à§‡à¦‡à¥¤",
      csvHeader:["Lap","Split","Total"],
      faq:"FAQ",
      q1:"à§«à¦Ÿà¦¿ à¦¸à§à¦Ÿà¦ªà¦“à¦¯à¦¼à¦¾à¦š à¦¸à¦¹ à¦•à§€à¦­à¦¾à¦¬à§‡ à¦–à§à¦²à¦¬à§‹?", a1:'<code>/time/stopwatch/?n=5</code> à¦­à¦¿à¦œà¦¿à¦Ÿ à¦•à¦°à§‡ à¦²à¦¿à¦™à§à¦• à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§à¦¨à¥¤',
      q2:"à¦²à§à¦¯à¦¾à¦ª à¦¸à¦®à¦¯à¦¼ à¦•à¦¿ à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿ à¦¹à¦¬à§‡?", a2:'à¦¹à§à¦¯à¦¾à¦ â€” <b>à¦à¦•à§à¦¸à¦ªà§‹à¦°à§à¦Ÿ</b> à¦•à§à¦²à¦¿à¦• à¦•à¦°à§‡ CSV (Lap, Split, Total) à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨à¥¤',
      q3:"à¦…à¦«à¦²à¦¾à¦‡à¦¨à§‡ à¦•à¦¾à¦œ à¦•à¦°à§‡?", a3:"à¦¬à§à¦°à¦¾à¦‰à¦œà¦¾à¦°à§‡à¦‡ à¦šà¦²à§‡, à¦•à§‹à¦¨à§‹ à¦¸à¦¾à¦‡à¦¨-à¦‡à¦¨ à¦¦à¦°à¦•à¦¾à¦° à¦¨à§‡à¦‡à¥¤",
      relTitle:"à¦¸à¦®à§à¦ªà¦°à§à¦•à¦¿à¦¤ à¦Ÿà§à¦²à¦¸",
      relText:'à¦…à§à¦¯à¦¾à¦²à¦¾à¦°à§à¦® à¦¦à¦°à¦•à¦¾à¦°? à¦¦à§‡à¦–à§à¦¨ <a href="/time/countdown-timer/">à¦•à¦¾à¦‰à¦¨à§à¦Ÿà¦¡à¦¾à¦‰à¦¨ à¦Ÿà¦¾à¦‡à¦®à¦¾à¦°</a>à¥¤ à¦¤à¦¾à¦°à¦¿à¦– à¦—à¦£à¦¨à¦¾: <a href="/calculators/date-difference/">à¦¡à§‡à¦Ÿ à¦¡à¦¿à¦«à¦¾à¦°à§‡à¦¨à§à¦¸</a>à¥¤'
    },
    ng: null, // fallback to en
    sw: {
      metaTitle:"Kipima Muda â€” Vipima Muda Vingi, Duru & Utoaji CSV | GoToolOnline",
      metaDesc:"Kipima muda mtandaoni bure hadi 5 sambamba. Anza/Sitisha, Duru, Weka upya na CSV. Nambari kubwa na njia za mkato.",
      back:"â† Rudi Nyumbani",
      crumbHome:"Nyumbani", crumbTime:"Zana za Muda", crumbCur:"Kipima muda",
      h1:"Kipima muda (Hadi 5)",
      hero:'Endesha vipima muda huru vingi, na duru na uhamishaji CSV. Shiriki mpangilio kwa <code>?n=5</code>.',
      addOne:"Ongeza Kipima muda", addToFive:"Ongeza 4 Zaidi",
      kbdHint:'Kibodi (kadi imezingatiwa): <kbd>Space</kbd> Anza/Sitisha Â· <kbd>L</kbd> Duru Â· <kbd>R</kbd> Weka upya',
      cardTitle:"Kipima muda", remove:"Futa", removeTitle:"Futa kipima muda hiki",
      start:"Anza", pause:"Sitisha", lap:"Duru", reset:"Weka upya", export:"Pakua CSV",
      lapsLabel:"Duru", thN:"#", thSplit:"Mgawanyo", thTotal:"Jumla",
      alertMax:"Upeo ni vipima muda 5 pekee.", alertNoLaps:"Hakuna duru za kupakua.",
      csvHeader:["Lap","Split","Total"],
      faq:"Maswali ya Mara kwa Mara",
      q1:"Nifungue vipi na vipima muda 5?", a1:'Tembelea <code>/time/stopwatch/?n=5</code> na ushiriki kiungo.',
      q2:"Naweza kupakua nyakati za duru?", a2:'Ndiyo â€” bonyeza <b>Pakua CSV</b> kupakua faili (Lap, Split, Total).',
      q3:"Hufanya kazi nje ya mtandao?", a3:"Mantiki inaendeshwa kwenye kivinjari chako. Hakuna kuingia.",
      relTitle:"Zana zinazohusiana",
      relText:'Unahitaji kengele? Jaribu <a href="/time/countdown-timer/">Kipima muda cha Ku-countdown</a>. Kwa tarehe, tazama <a href="/calculators/date-difference/">Tofauti ya Tarehe</a>.'
    },
    ar: {
      metaTitle:"Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù â€” Ù…Ø¤Ù‚ØªØ§Øª Ù…ØªÙˆØ§Ø²ÙŠØ©ØŒ Ù„ÙÙ‘Ø§Øª ÙˆØªØµØ¯ÙŠØ± CSV | GoToolOnline",
      metaDesc:"Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª Ø­ØªÙ‰ 5 Ù…Ø¤Ù‚ØªØ§Øª Ù…ØªÙˆØ§Ø²ÙŠØ©. Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚ØªØŒ Ù„ÙÙ‘Ø©ØŒ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ÙˆØªØµØ¯ÙŠØ± CSV. Ø£Ø±Ù‚Ø§Ù… ÙƒØ¨ÙŠØ±Ø© ÙˆØ§Ø®ØªØµØ§Ø±Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­.",
      back:"â† Ø§Ù„Ø±Ø¬ÙˆØ¹ Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©",
      crumbHome:"Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©", crumbTime:"Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆÙ‚Øª", crumbCur:"Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù",
      h1:"Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù (Ø­ØªÙ‰ 5)",
      hero:'Ø´ØºÙ‘Ù„ Ø¹Ø¯Ø© Ø³Ø§Ø¹Ø§Øª Ø¥ÙŠÙ‚Ø§Ù Ù…Ø³ØªÙ‚Ù„Ø© Ù…Ø¹ Ø§Ù„Ù„ÙÙ‘Ø§Øª ÙˆØªØµØ¯ÙŠØ± CSV. Ø´Ø§Ø±Ùƒ Ø§Ù„ØªØ®Ø·ÙŠØ· Ø¹Ø¨Ø± <code>?n=5</code>.',
      addOne:"Ø¥Ø¶Ø§ÙØ© Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù", addToFive:"Ø¥Ø¶Ø§ÙØ© 4 Ø£Ø®Ø±Ù‰",
      kbdHint:'Ù„ÙˆØ­Ø© Ø§Ù„Ù…ÙØ§ØªÙŠØ­ (Ø¹Ù†Ø¯ ØªØ±ÙƒÙŠØ² Ø§Ù„Ø¨Ø·Ø§Ù‚Ø©): <kbd>Space</kbd> Ø¨Ø¯Ø¡/Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª Â· <kbd>L</kbd> Ù„ÙÙ‘Ø© Â· <kbd>R</kbd> Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·',
      cardTitle:"Ø³Ø§Ø¹Ø© Ø¥ÙŠÙ‚Ø§Ù", remove:"Ø­Ø°Ù", removeTitle:"Ø­Ø°Ù Ù‡Ø°Ù‡ Ø§Ù„Ø³Ø§Ø¹Ø©",
      start:"Ø¨Ø¯Ø¡", pause:"Ø¥ÙŠÙ‚Ø§Ù Ù…Ø¤Ù‚Øª", lap:"Ù„ÙØ©", reset:"Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø·", export:"ØªØµØ¯ÙŠØ±",
      lapsLabel:"Ø§Ù„Ù„ÙÙ‘Ø§Øª", thN:"#", thSplit:"Ø§Ù„ÙØ§ØµÙ„", thTotal:"Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ",
      alertMax:"Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5 Ø³Ø§Ø¹Ø§Øª Ø¥ÙŠÙ‚Ø§Ù.", alertNoLaps:"Ù„Ø§ ØªÙˆØ¬Ø¯ Ù„ÙÙ‘Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±.",
      csvHeader:["Lap","Split","Total"],
      faq:"Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©",
      q1:"ÙƒÙŠÙ Ø£ÙØªØ­ Ø¨Ù€ 5 Ø³Ø§Ø¹Ø§Øª Ø¥ÙŠÙ‚Ø§ÙØŸ", a1:'Ø§Ø°Ù‡Ø¨ Ø¥Ù„Ù‰ <code>/time/stopwatch/?n=5</code> ÙˆØ´Ø§Ø±Ùƒ Ø§Ù„Ø±Ø§Ø¨Ø·.',
      q2:"Ù‡Ù„ ÙŠÙ…ÙƒÙ† ØªØµØ¯ÙŠØ± Ø£Ø²Ù…Ù†Ø© Ø§Ù„Ù„ÙÙ‘Ø§ØªØŸ", a2:'Ù†Ø¹Ù… â€” Ø§Ù†Ù‚Ø± <b>ØªØµØ¯ÙŠØ±</b> Ù„ØªØ­Ù…ÙŠÙ„ CSV (Lap, Split, Total).',
      q3:"Ù‡Ù„ ØªØ¹Ù…Ù„ Ø¯ÙˆÙ† Ø§ØªØµØ§Ù„ØŸ", a3:"Ø§Ù„ØªØ´ØºÙŠÙ„ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­. Ù„Ø§ Ø­Ø§Ø¬Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„.",
      relTitle:"Ø£Ø¯ÙˆØ§Øª Ø°Ø§Øª ØµÙ„Ø©",
      relText:'ØªØ±ÙŠØ¯ Ù…Ø¤Ù‚Øª Ø¹Ø¯Ù‘ ØªÙ†Ø§Ø²Ù„ÙŠØŸ Ø¬Ø±Ù‘Ø¨ <a href="/time/countdown-timer/">Ø§Ù„Ø¹Ø¯Ù‘Ø§Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ</a>. Ù„Ø­Ø³Ø§Ø¨ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®ØŒ Ø§Ù†Ø¸Ø± <a href="/calculators/date-difference/">ÙØ±Ù‚ Ø§Ù„ØªÙˆØ§Ø±ÙŠØ®</a>.'
    }
  };
  I18N.ng = I18N.en; // English (NG) fallback

  function getLang(){
    const u = new URL(location.href);
    return u.searchParams.get('lang') || localStorage.getItem('lang') || 'en';
  }

  function applyLang(lang){
    const t = I18N[lang] || I18N.en;
    window._t = t;

    document.documentElement.lang = HTML_LANG[lang] || 'en';
    document.documentElement.dir  = (lang === 'ar') ? 'rtl' : 'ltr';

    document.title = t.metaTitle;
    const md = document.querySelector('meta[name="description"]'); if (md) md.setAttribute('content', t.metaDesc);

    // Header & crumbs
    document.getElementById('backLink').textContent = t.back;
    document.getElementById('bcHome').textContent = t.crumbHome;
    document.getElementById('bcTime').textContent = t.crumbTime;
    document.getElementById('bcCurrent').textContent = t.crumbCur;

    // Main hero & toolbar
    document.getElementById('pageTitle').textContent = t.h1;
    document.getElementById('hero').innerHTML = t.hero;
    document.getElementById('addOne').textContent = t.addOne;
    document.getElementById('addToFive').textContent = t.addToFive;
    document.getElementById('kbHint').innerHTML = t.kbdHint;

    // FAQ & related
    document.getElementById('faq-h2').textContent = t.faq;
    document.getElementById('q1').textContent = t.q1; document.getElementById('a1').innerHTML = t.a1;
    document.getElementById('q2').textContent = t.q2; document.getElementById('a2').innerHTML = t.a2;
    document.getElementById('q3').textContent = t.q3; document.getElementById('a3').textContent  = t.a3;
    document.getElementById('relTitle').textContent = t.relTitle;
    document.getElementById('relText').innerHTML = t.relText;

    // Existing cards text refresh
    document.querySelectorAll('.title strong').forEach((el, idx)=>{
      const id = el.dataset.sid || (idx+1);
      el.textContent = `${t.cardTitle} #${id}`;
    });
    document.querySelectorAll('.btn-remove').forEach(el=>{ el.textContent = t.remove; el.title = t.removeTitle; });
    document.querySelectorAll('.btn-start').forEach(el=>{
      // keep Start/Pause state; if currently "Pause" use t.pause
      el.textContent = el.dataset.state === 'pause' ? t.pause : t.start;
    });
    document.querySelectorAll('.btn-lap').forEach(el=> el.textContent = t.lap);
    document.querySelectorAll('.btn-reset').forEach(el=> el.textContent = t.reset);
    document.querySelectorAll('.btn-export').forEach(el=> el.textContent = t.export);
    document.querySelectorAll('.laps-label').forEach(el=> el.setAttribute('aria-label', t.lapsLabel));
    document.querySelectorAll('thead').forEach(head=>{
      const th = head.querySelectorAll('th');
      if (th[0]) th[0].textContent = t.thN;
      if (th[1]) th[1].textContent = t.thSplit;
      if (th[2]) th[2].textContent = t.thTotal;
    });

    // persist & sync URL ?lang
    localStorage.setItem('lang', lang);
    const url = new URL(location.href);
    url.searchParams.set('lang', lang);
    history.replaceState({}, '', url.pathname + '?' + url.searchParams.toString());
  }

  const langSel = document.getElementById('lang');
  const curLang = getLang();
  langSel.value = I18N[curLang] ? curLang : 'en';
  applyLang(langSel.value);
  langSel.addEventListener('change', ()=> applyLang(langSel.value));
</script>

<script>
  // ------- Stopwatch logic (with i18n alerts & labels) -------
  const MAX_SW = 5;
  const state = []; // [{id, running, elapsed, last, laps:[{n,time,split}], raf, el}]
  let idSeq = 1;
  const wrap = document.getElementById('wrap');

  function fmt(ms){
    ms = Math.max(0, ms|0);
    const cs = Math.floor((ms % 1000) / 10);
    const s  = Math.floor(ms / 1000) % 60;
    const m  = Math.floor(ms / 60000) % 60;
    const h  = Math.floor(ms / 3600000);
    const HH = String(h).padStart(2,'0');
    const MM = String(m).padStart(2,'0');
    const SS = String(s).padStart(2,'0');
    const CS = String(cs).padStart(2,'0');
    return `${HH}:${MM}:${SS}.${CS}`;
  }

  function createCard(){
    const t = window._t || I18N.en;
    if (state.length >= MAX_SW) { alert(t.alertMax); return; }
    const id = idSeq++;
    const el = document.createElement('div');
    el.className = 'sw';
    el.tabIndex = 0; // focusable for keyboard
    el.innerHTML = `
      <div class="title">
        <strong data-sid="${id}">${t.cardTitle} #${id}</strong>
        <button class="btn-remove" data-act="remove" title="${t.removeTitle}">${t.remove}</button>
      </div>
      <div class="time" data-role="time" aria-live="polite">00:00:00.00</div>
      <div class="controls" role="group" aria-label="Controls">
        <button class="btn-start" data-act="start">${t.start}</button>
        <button class="btn-lap" data-act="lap" disabled>${t.lap}</button>
        <button class="btn-reset" data-act="reset" disabled>${t.reset}</button>
        <button class="btn-export" data-act="export" disabled title="Export laps to CSV">${t.export}</button>
      </div>
      <div class="laplist">
        <table aria-label="${t.lapsLabel}" class="laps-label">
          <thead><tr><th>${t.thN}</th><th>${t.thSplit}</th><th>${t.thTotal}</th></tr></thead>
          <tbody></tbody>
        </table>
      </div>
    `;
    wrap.appendChild(el);

    const st = {
      id,
      running:false,
      elapsed:0, last:0,
      laps:[],
      raf:null,
      el
    };
    state.push(st);
    wireCard(st);
    return st;
  }

  function wireCard(st){
    const t = window._t || I18N.en;
    const timeEl = st.el.querySelector('[data-role="time"]');
    const btnStart = st.el.querySelector('button[data-act="start"]');
    const btnLap = st.el.querySelector('button[data-act="lap"]');
    const btnReset = st.el.querySelector('button[data-act="reset"]');
    const btnExport = st.el.querySelector('button[data-act="export"]');
    const btnRemove = st.el.querySelector('button[data-act="remove"]');
    const tbody = st.el.querySelector('tbody');

    function updateView(ms){ timeEl.textContent = fmt(ms); }

    function tick(now){
      if (!st.running){ st.raf = null; return; }
      if (!st.last) st.last = now;
      const dt = now - st.last;
      st.last = now;
      st.elapsed += dt;
      updateView(st.elapsed);
      st.raf = requestAnimationFrame(tick);
    }

    function start(){
      if (st.running) return;
      st.running = true;
      btnStart.textContent = (window._t || I18N.en).pause;
      btnStart.dataset.state = 'pause';
      btnLap.disabled = false;
      btnReset.disabled = false;
      btnExport.disabled = st.laps.length === 0;
      st.last = performance.now();
      st.raf = requestAnimationFrame(tick);
    }

    function pause(){
      if (!st.running) return;
      st.running = false;
      btnStart.textContent = (window._t || I18N.en).start;
      btnStart.dataset.state = 'start';
      if (st.raf){ cancelAnimationFrame(st.raf); st.raf = null; }
    }

    function toggle(){ st.running ? pause() : start(); }

    function reset(){
      pause();
      st.elapsed = 0;
      st.laps = [];
      tbody.innerHTML = '';
      updateView(0);
      btnLap.disabled = true;
      btnReset.disabled = true;
      btnExport.disabled = true;
    }

    function lap(){
      const n = st.laps.length + 1;
      const split = st.laps.length ? st.elapsed - st.laps[st.laps.length-1].time : st.elapsed;
      st.laps.push({ n, time: st.elapsed, split });
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${n}</td><td>${fmt(split)}</td><td>${fmt(st.elapsed)}</td>`;
      tbody.prepend(tr);
      btnExport.disabled = false;
    }

    function exportCSV(){
      const t = window._t || I18N.en;
      if (!st.laps.length){ alert(t.alertNoLaps); return; }
      const header = t.csvHeader || ["Lap","Split","Total"];
      let csv = header.join(',') + '\n';
      const arr = [...st.laps].sort((a,b)=>a.n-b.n);
      arr.forEach(x=> csv += `${x.n},${fmt(x.split)},${fmt(x.time)}\n`);
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `stopwatch_${st.id}_laps.csv`;
      document.body.appendChild(a);
      a.click();
      a.remove();
      URL.revokeObjectURL(url);
    }

    // Button events
    btnStart.addEventListener('click', toggle);
    btnLap.addEventListener('click', lap);
    btnReset.addEventListener('click', reset);
    btnExport.addEventListener('click', exportCSV);
    btnRemove.addEventListener('click', ()=>{
      pause();
      const idx = state.findIndex(x=>x.id===st.id);
      if (idx>=0) state.splice(idx,1);
      st.el.remove();
    });

    // Keyboard shortcuts (card must be focused)
    st.el.addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if (k === ' ' || k === 'spacebar'){ e.preventDefault(); toggle(); }
      if (k === 'l'){ e.preventDefault(); if (!btnLap.disabled) lap(); }
      if (k === 'r'){ e.preventDefault(); reset(); }
    });

    updateView(0);
  }

  // Toolbar actions
  document.getElementById('addOne').addEventListener('click', ()=> createCard());
  document.getElementById('addToFive').addEventListener('click', ()=>{
    while (state.length < MAX_SW) createCard();
  });

  // Boot: from URL ?n=5
  (function boot(){
    const n = Math.max(1, Math.min(MAX_SW, parseInt(new URLSearchParams(location.search).get('n')||'1',10)));
    for (let i=0;i<n;i++) createCard();
  })();
</script>

<!-- ä¿ç•™ä½ åŸæ¥çš„ Home é“¾æ¥è§£æï¼Œå¹¶ç»§ç»­é€ä¼  ?lang -->
<script>
(function(){
  // Compute site root by removing the last two segments (category/tool)
  var path = location.pathname.replace(/\/+$/,''); // strip trailing slashes
  var parts = path.split('/');
  if (parts.length >= 3) parts = parts.slice(0, parts.length - 2);
  else parts = ['']; // already at root
  var home = parts.join('/') + '/';

  // preserve ?lang if present
  var cur = new URL(location.href);
  var lang = cur.searchParams.get('lang');
  if (lang) {
    var u = new URL(home, location.origin);
    u.searchParams.set('lang', lang);
    home = u.pathname + u.search + u.hash;
  }

  document.querySelectorAll('a[data-home]').forEach(function(a){
    a.setAttribute('href', home);
  });
})();
</script>
</body>
</html>
